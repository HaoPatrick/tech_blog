<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us" >

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" /> 
    <title>Posts | Xiangpeng Hao</title>
     <meta property='og:title' content='Posts - Xiangpeng Hao'>
<meta property='og:description' content=''>
<meta property='og:url' content='/posts/'>
<meta property='og:site_name' content='Xiangpeng Hao'>
<meta property='og:type' content='website'><meta property='article:section' content='Posts'><meta property='og:updated_time' content='2020-10-29T19:23:31&#43;08:00'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@'><meta name='twitter:creator' content='@'>
    <link rel="alternate" type="application/rss+xml" href="/posts/index.xml" title="Xiangpeng Hao" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="shortcut icon" href="favicon.png" /></head>

<body>
<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="/"><h1 class="title is-4">Xiangpeng Hao</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" href='https://haoxp.xyz' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <g transform="scale(0.042)" stroke-width="4">
        <path fill="currentColor"
            d="M528 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm0 400H48V80h480v352zM208 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4 0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8 0-18.7 8-44.8 8-26.9 0-33.4-8-44.8-8-37.1 0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2zM360 320h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8zm0-64h112c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8H360c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8z">
        </path>
        
    </g>
    
</svg></i>
            </span>
          </a><a class="level-item" href='https://github.com/XiangpengHao' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" />
    
</svg></i>
            </span>
          </a><a class="level-item" href='https://linkedin.com/in/hao-xiangpeng' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8"
        d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z" />
    
</svg></i>
            </span>
          </a><a class="level-item" href='https://blog.haoxp.xyz/index.xml' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <g transform="scale(0.045)" stroke-width="40">
        <path
            d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z">
        </path>
    </g>
    
    
</svg></i>
            </span>
          </a><a class="level-item" href='https://t.me/newsathlh' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path
        d="m 22.05,1.577 c -0.393,-0.016 -0.784,0.08 -1.117,0.235 -0.484,0.186 -4.92,1.902 -9.41,3.64 C 9.263,6.325 7.005,7.198 5.267,7.867 3.53,8.537 2.222,9.035 2.153,9.059 c -0.46,0.16 -1.082,0.362 -1.61,0.984 -0.79581202,1.058365 0.21077405,1.964825 1.004,2.499 1.76,0.564 3.58,1.102 5.087,1.608 0.556,1.96 1.09,3.927 1.618,5.89 0.174,0.394 0.553,0.54 0.944,0.544 l -0.002,0.02 c 0,0 0.307,0.03 0.606,-0.042 0.3,-0.07 0.677,-0.244 1.02,-0.565 0.377,-0.354 1.4,-1.36 1.98,-1.928 l 4.37,3.226 0.035,0.02 c 0,0 0.484,0.34 1.192,0.388 0.354,0.024 0.82,-0.044 1.22,-0.337 0.403,-0.294 0.67,-0.767 0.795,-1.307 0.374,-1.63 2.853,-13.427 3.276,-15.38 L 23.676,4.725 C 23.972,3.625 23.863,2.617 23.18,2.02 22.838,1.723 22.444,1.593 22.05,1.576 Z" />
    
</svg></i>
            </span>
          </a></nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    
    <article>
      <div class="subtitle is-6 is-pulled-right">
        
      </div>
      <h2 class="subtitle is-6">January 20, 2020</h2>
      <h1 class="title"><a href="/posts/paper-review-2/">Paper Review: Concurrency Control</a></h1>
      <div class="content">
        FOEDUS: OLTP Engine for a Thousand Cores and NVRAM This is a very high-level paper about the overview of a complex system, yet it fits into the category: build a new system using existing components. The paper tried to address two sub topics: 1) database systems that scale to 1000 cores, 2) database systems on NVRAM.
Although the paper claimed to solved the issues, I personally did not enjoy reading it because I didn&rsquo;t see a clear logic flow on solving problems.
        
        <a class="button is-link" href="/posts/paper-review-2/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <div class="subtitle is-6 is-pulled-right">
        
      </div>
      <h2 class="subtitle is-6">January 13, 2020</h2>
      <h1 class="title"><a href="/posts/paper-review-1/">Paper Review: Database System Architectures</a></h1>
      <div class="content">
        In a nutshell: data is migrating from disk to memory, and how can we design new system to fit this trend.
The End of an Architectural Era (Itâ€™s Time for a Complete Rewrite) (2007) In this paper, the authors tried to convince that the old one-fit-all database architecture is no longer fit for the emerging hardwares, database researchers should start with new empty sheets of paper and focus on tomorrow&rsquo;s requirements.
        
        <a class="button is-link" href="/posts/paper-review-1/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <div class="subtitle is-6 is-pulled-right">
        
      </div>
      <h2 class="subtitle is-6">December 15, 2019</h2>
      <h1 class="title"><a href="/posts/smart_home/">My Privacy Preserved Smart Home</a></h1>
      <div class="content">
        I&rsquo;ve been looking for an ultimate smart home solution for a while, yet none of them fit my needs.
In an ideal world, a smart home will have the following features:
 What happens in my room stays in my room. Privacy is my first concern when considering a smart home. I don&rsquo;t trust big evil companies. Thus any products from Google or Amazon lose the competition.
 It should be highly customizable.
        
        <a class="button is-link" href="/posts/smart_home/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <div class="subtitle is-6 is-pulled-right">
        
      </div>
      <h2 class="subtitle is-6">November 4, 2019</h2>
      <h1 class="title"><a href="/posts/is-clwb-implemented/">Is CLWB actually implemented?</a></h1>
      <div class="content">
        TLDR: No. clwb is just an alias of clflushopt on Cascadelake.
What is clwb, clflushopt, clflush? It sounds crazy, but before clflush there isn&rsquo;t a instruction on Intel x86 platform that can explicitly evict a cacheline. In other words, applications has no control of when their data should be flushed to memory.
So Intel came up with their own solution, namely clflush (cache line flush), which flush a cache line.
        
        <a class="button is-link" href="/posts/is-clwb-implemented/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <div class="subtitle is-6 is-pulled-right">
        
      </div>
      <h2 class="subtitle is-6">August 25, 2019</h2>
      <h1 class="title"><a href="/posts/sunday-burnabypark/">Photos: Sunday Afternoon @SFU</a></h1>
      <div class="content">
        Disclaimer: I&rsquo;m a novice photographing hobbyist, who can&rsquo;t afford expensive lens/cameras, and lazy enough not to practice photographing skills.
  Bird @Bay4     Undefined Building       Undefined Building     Undefined Building     Running     A peek into Vancouver     Wanna try?     National Flag   
        
      </div>
    </article>
    
    <article>
      <div class="subtitle is-6 is-pulled-right">
        
      </div>
      <h2 class="subtitle is-6">August 24, 2019</h2>
      <h1 class="title"><a href="/posts/memory-visualizer/">[Debugger] Memory Visualizer?</a></h1>
      <div class="content">
        For months I&rsquo;ve been imaging how beautiful my life can be if lldb (or less likely gdb) has something called memory visualizer.
As my core research goal is to design efficient data structures that fits any workload on any devices. I frequently need to check how my data structure really looks like in the memory, and how it grows/shrimps on certain access pattern. What&rsquo;s more, a memory visualizer can be extremely helpful when debugging concurrency bugs, because you never know where the bugs is, and a visualizer just adds much much more insights than breakpoints.
        
        <a class="button is-link" href="/posts/memory-visualizer/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <div class="subtitle is-6 is-pulled-right">
        
      </div>
      <h2 class="subtitle is-6">August 14, 2019</h2>
      <h1 class="title"><a href="/posts/optane-performance/">How fast is Intel DC Persistent Memory Module?</a></h1>
      <div class="content">
        TL;DR: Slow, SSD-level.
More details checkout this paper.
I only measured write performance, using the tool pqos-os by Intel.
System Configuration    Item Spec     CPU Intel&reg; Xeon&reg; Gold 6252 CPU @ 2.10GHz * 2   DRAM 2666 MHz - 6 * 32 GB * 2   Intel DCPMM 2666 MHz - 4 * 128 GB * 2   Linux Distro/Kernel Arch Linux - 5.
        
        <a class="button is-link" href="/posts/optane-performance/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <div class="subtitle is-6 is-pulled-right">
        
      </div>
      <h2 class="subtitle is-6">August 9, 2019</h2>
      <h1 class="title"><a href="/posts/new-server/">What&#39;s it like to program on a $26k computer</a></h1>
      <div class="content">
        Our new server (left bottom) just arrived today.
Fun facts  It has ten hard drive slots, but only one slot is used, installed a single 240 GiB SATA intel SSD.
 It has 1.408 TiB memory (12x32 GiB DRAM + 8x128 GiB Optane), and we plan to reach 1.92 TiB memory (12x32 GiB DRAM + 12x128 GiB Optane) next month.
 There&rsquo;re two 24 core Intel&reg; Xeon&reg; Gold 6252 CPU installed, with hyper-thread enabled, htop is like:  It takes 10 mins to boot, and loud enough to wake up everyone in the lab.
        
        <a class="button is-link" href="/posts/new-server/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <div class="subtitle is-6 is-pulled-right">
        
      </div>
      <h2 class="subtitle is-6">July 26, 2019</h2>
      <h1 class="title"><a href="/posts/mimalloc-review/">Modern allocator: mimalloc</a></h1>
      <div class="content">
        Memory management, especially memory allocation has been a important bottleneck of high performance multi-thread systems.
The following figure shows one my of experiments on high performance in-memory indexes. The experiment is performed on a four-socket machine with 40 physical cores in total. The yellow line shows the result with jemalloc and grey lines shows the throughput with glibc malloc.
There&rsquo;re two problems with glibc malloc:
 It&rsquo;s slower than jemalloc
        
        <a class="button is-link" href="/posts/mimalloc-review/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <div class="subtitle is-6 is-pulled-right">
        
      </div>
      <h2 class="subtitle is-6">July 23, 2019</h2>
      <h1 class="title"><a href="/posts/check-bit-set/">Efficient(correct) way to check a bit value in C/C&#43;&#43; </a></h1>
      <div class="content">
        It&rsquo;s very common to manipulate data in the bit granularity in high performance systems, and checking whether a bit equals to 1 is one of the primary operations.
The way I usually do is:
#define CHECK_BIT(var, pos) ((((var) &amp; (1 &lt;&lt; pos)) &gt; 0) ? (1) : (0))  It basically creates a mask and perform an and operation against the variable, it&rsquo;s simple and intuitive enough that I never thought it can be a bottleneck.
        
        <a class="button is-link" href="/posts/check-bit-set/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
  </div>
</section>
<section class="section">
  <div class="container">
    <nav class="level is-mobile">
      <div class="level-left">
        <div class="level-item">
          
          <a class="button" href="/posts/page/2/">
            <span class="icon is-small is-marginless">
              <svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <polyline points="15 18 9 12 15 6" />
    
</svg>
            </span>
            Newer
          </a>
          
        </div>
      </div>
      <div class="level-right is-marginless">
        <div class="level-item">
          
          <a class="button" href="/posts/page/4/">
            Older
            <span class="icon is-small is-marginless">
              <svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <polyline points="14 6 20 12 14 18" />
    
</svg>
            </span>
          </a>
          
        </div>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container has-text-centered">
    <p><a href="https://www.haoxp.xyz">Xiangpeng Hao</a> 2020</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-66103952-7', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</body>
</html>

